group 'com.inthemoon.markup'
version '1.0-SNAPSHOT'

apply plugin: 'java'

sourceCompatibility = 1.8

libsDirName = '../lib'

repositories {
    mavenCentral()
}

dependencies {

    compile('org.piccolo2d:piccolo2d-core:3.0')
    compile('org.piccolo2d:piccolo2d-extras:3.0')

    testCompile group: 'junit', name: 'junit', version: '4.11'
}



task copyRuntimeLibs(type: Copy) {
    into "lib"

    from configurations.runtime

}

task jarsList {

    FileCollection collection = files {
        new File('lib').listFiles()
    }

    File jarsFile = new File("matlab/jars.m")
    jarsFile.delete()

    collection.collect { new File(new File(".."), relativePath(it)).path }.sort().each {
        jarsFile << String.format("javaaddpath('%s');\n", it)
    }


}


build.dependsOn(copyRuntimeLibs)
build.dependsOn(jarsList)
